/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.3.0.4.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2021 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
import y from"./core.js";import l from"./lang.js";import _a_ from"./algorithms.js";import _b_ from"./layout-core.js";import _c_ from"./layout-hierarchic.js";import _d_ from"./router-other.js";_a_.lang=l,_b_.lang=l,_c_.lang=l,_d_.lang=l,function($,f,n,r){"use strict";function i(f){var n=new $.C.KOC,r=n.$mcf;r.$UDf=new $.C.HPC.$w(0,!1),r.$Hlf=60,r.$Akf=20;var i=n.$scf;switch(f.$f7){case-1:i.$ZMf=0;break;case 0:i.$ZMf=.5;break;case 1:i.$ZMf=1}return n}function t($,f,n){for(var r=0,i=0,t=f.$Zpf();t.$OJ;t.$xO()){var l=t.$aJ;1===n.$IP(l)?l.$f7>0&&i++:r+=l.$f6}return i<=1&&2===r}function l(f,n,r){var i=n.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY);f.$f16=n.$fsf(),f.$f17=n.$fsf(),f.$f3=n.$fsf(),f.$f4=n.$fsf(),f.$f12 instanceof $.C.KOC&&0!==f.$f20&&(f.$f=f.$f12.$cQg(n)),function(f,n,r){f.$f5=$.DF.$m13(n.$ss),f.$f1=new $.FE;var i=new $.FE;f.$f11=new $.C.FXA.$v,f.$f2=n.$gsf(),f.$f15=n.$gsf(),f.$f6=n.$gsf(),f.$f9=n.$gsf(),f.$f8=n.$gsf(),f.$f19=new $.ME;for(var t=n.$isf();t.$OJ;t.$xO()){var l=new $.C.FXA.$v,u=t.$aJ;f.$f2.$kU(u,"n"+u.$rf),1===n.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY).$IP(u)?a(f,u,l):e(f,u,l);var _=new $.FE;_.$m(l),o(f,l,_);for(var s=0;s<_.$oC;s++)if((l=_.$rC(s)).$f1>1){for(var E=new $.GH.$c1("GN"),C=0;C<l.$f1;C++)E.$m2($.LF.$m8(l.$rC(C).$rf)),E.$m2("/");i.$m(E.toString()),f.$f1.$m(l)}}for(var O=0;O<f.$f1.$oC;O++){var g=new $.C.XVA(0,0,0,0),T=n.$Vrf(),l=f.$f1.$rC(O);f.$f11.$m5(T);for(var h=0;h<l.$f1;h++){var P=l.$rC(h);f.$f15.$kU(P,i.$rC(O)),f.$f9.$kU(P,r),f.$f8.$kU(P,g)}f.$f8.$kU(T,g),f.$f6.$OE(T,!0),f.$f2.$kU(T,i.$rC(O))}n.$wUg($.T.ZXA.NODE_ID_DP_KEY,f.$f2),n.$wUg($.T.ZXA.PARENT_NODE_ID_DP_KEY,f.$f15),n.$wUg($.T.ZXA.GROUP_DP_KEY,f.$f6),n.$wUg($.T.ZXA.GROUP_NODE_INSETS_DP_KEY,f.$f8),n.$wUg($.T.AKC.LAYOUT_DP_KEY,f.$f9)}(f,n,r);for(var t=n.$iEg($.T.HJC.NODE_ID_DP_KEY),l=n.$isf();l.$OJ;l.$xO()){var u=l.$aJ;if(1===n.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY).$IP(u)){for(var _=null,s=u.$iGg(null);s.$OJ;s.$xO()){var E=s.$ZJ.$f3;if(null===_&&(_=E),n.$AVg(s.$ZJ,new $.C.GWA.$w(0,n.$m38(s.$ZJ.$f2).$xL/2)),n.$CVg(s.$ZJ,new $.C.GWA.$w(0,-n.$m38(s.$ZJ.$f3).$xL/2)),f.$f3.$kU(s.$ZJ,$.T.GLC.$w(2,!0)),f.$f4.$kU(s.$ZJ,$.T.GLC.$w(1,!0)),null!==f.$f&&_!==E){var C=null===t?_:t.$IP(_),O=null===t?E:t.$IP(E);(4===f.$f20||3===f.$f20)!==(2===i.$IP(E))?f.$f.$dX(C,O):f.$f.$gX(C,O)}}for(var g=new $.FE,T="CG"+u.$rf,h=u.$iGg(null);h.$OJ;h.$xO()){var P=h.$ZJ;f.$f16.$kU(P,T);var I=f.$f15.$IP(P.$f3);null!==I&&-1!==g.indexOf(I)||(f.$f17.$kU(P,T),null!==I&&g.$m(I))}}}n.$wUg($.T.ILC.SOURCE_GROUP_ID_DP_KEY,f.$f16),n.$wUg($.T.ILC.TARGET_GROUP_ID_DP_KEY,f.$f17),n.$wUg($.T.ILC.SOURCE_PORT_CONSTRAINT_DP_KEY,f.$f3),n.$wUg($.T.ILC.TARGET_PORT_CONSTRAINT_DP_KEY,f.$f4)}function a(f,n,r){if(1!==n.$f2.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY).$IP(n))throw $.JG.$m30(I[4]);if(!f.$f5[n.$rf]){r.$m5(n),f.$f5[n.$rf]=!0;for(var i=0,t=n.$Iuf();t.$OJ;t.$xO())if(e(f,t.$aJ,r),++i>2)throw $.JG.$m30(I[5])}}function e(f,n,r){if(1===n.$f2.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY).$IP(n))throw $.JG.$m30(I[6]);if(!f.$f5[n.$rf]){r.$m5(n),f.$f5[n.$rf]=!0;for(var i=n.$yuf();i.$OJ;i.$xO())a(f,i.$aJ,r)}}function o(f,n,r){var i=-1,t=-1;for(i=0;i<n.$f1;i++){var l=n.$rC(i);if(1===l.$f2.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY).$IP(l)){for(var a=l.$yuf();a.$OJ&&!((t=n.indexOf(a.$aJ))>-1);a.$xO());if(t>-1)break}}if(-1!==t){var e=new $.C.FXA.$v,s=n.$rC(i),E=n.$rC(t),C=new $.C.FXA.$v;n.$MI(E),e.$m5(E);for(a=E.$yuf();a.$OJ;a.$xO()){var O=a.$aJ;n.$MI(O),e.$m5(O);for(var g=O.$Iuf();g.$OJ;g.$xO()){var T=g.$aJ;T!==E&&(u(f,O,T,s,E)?_(f,O,n,e):C.$m5(O))}}if(n.$Vqf()){n.$Xwf(e),C.$II(),n.$MI(E),e.$m5(E);for(a=E.$yuf();a.$OJ;a.$xO()){O=a.$aJ;n.$MI(O),e.$m5(O),C.$m5(O)}}for(a=C.$Zpf();a.$OJ;a.$xO())for(var h=a.$aJ.$lEg(null);h.$OJ;h.$xO())if(h.$ZJ.$f2!==E){var P=E.$f2;P.$AVg(h.$ZJ,new $.C.GWA.$w(0,0)),P.$CVg(h.$ZJ,new $.C.GWA.$w(0,0)),f.$f3.$kU(h.$ZJ,$.T.GLC.$w(0,!0)),f.$f4.$kU(h.$ZJ,$.T.GLC.$w(0,!0)),f.$f19.$m(h.$ZJ)}o(f,n,r),o(f,e,r),r.$m(e)}}function u(f,n,r,i,t){return function f(n,r,i,t,l,a){if(!$.KE.$m9(a,new $.T.ENC.T(r,i)))return!0;var e=!0;for(var o=i.$yuf();o.$OJ;o.$xO()){var u=o.$aJ;if(u!==r){if(u===t)return!1;for(var _=u.$Iuf();_.$OJ;_.$xO()){var s=_.$aJ;if(s!==i&&!f(n,u,s,t,l,a)){e=!1;break}}}}return e}(f,n,r,i,t,new $.ME)}function _($,f,n,r){for(var i=f.$Iuf();i.$OJ;i.$xO()){var t=i.$aJ;if(!(n.indexOf(t)<0)){n.$MI(t),r.$m5(t);for(var l=t.$yuf();l.$OJ;l.$xO()){var a=l.$aJ;n.indexOf(a)>-1&&(n.$MI(a),r.$m5(a),_($,a,n,r))}}}}function s($,f,n,r){for(var i=1,t=f.$Iuf();t.$OJ;t.$xO()){var l=t.$aJ;if(l!==n&&-1===r.indexOf(l)){r.$m5(l);for(var a=l.$yuf();a.$OJ;a.$xO()){var e=a.$aJ;e!==f&&(i+=s($,e,l,r))}}}return i}var E=f.lang.ClassDefinition,C=(f.lang.InterfaceDefinition,f.lang.AttributeDefinition,f.lang.EnumDefinition),O=(f.lang.StructDefinition,f.lang.Abstract,f.lang.module),g=(f.lang.delegate,f.lang.Boolean,f.lang.Number,f.lang.Void,f.lang.Object),T=(f.lang.String,f.lang.decorators.Type),h=f.lang.decorators.OptionArgs,P=f.lang.decorators.SetterArg;f.lang.addMappings("yFiles-for-HTML-Complete-2.3.0.4-Evaluation (Build af8280ceb940-06/07/2021)",{get _$_spd(){return["alignment","$zv",T("yfiles._R.C.GNC",5)]},_$_tpd:["topLayout","$Av"],_$_xff:["partnerlessBelow","$TSf"],_$_kzf:["offsetForFamilyNodes","$ccf"],_$_whg:["familyNodesAlwaysBelow","$ugf"],get _$_urg(){return["familyMembersSortingPolicy","$xmf",T("yfiles._R.C.HNC",5)]},_$_vsg:["spacingBetweenFamilyMembers","$amf"],get _$_cjn(){return["FamilyTreeLayout","ENC",h(P("topLayout"),P("spacingBetweenFamilyMembers"),P("offsetForFamilyNodes"),P("partnerlessBelow"),P("familyNodesAlwaysBelow"),P("alignment","yfiles._R.C.GNC"),P("parallelEdgeRouterEnabled"),P("selfLoopRouterEnabled"),P("familyMembersSortingPolicy","yfiles._R.C.HNC"),P("labeling"),P("selfLoopRouter"),P("parallelEdgeRouter"),P("componentLayout"),P("subgraphLayout"),P("hideGroupsStage"),P("orientationLayout"),P("orientationLayoutEnabled"),P("layoutOrientation","yfiles._R.C.SHC"),P("labelingEnabled"),P("hideGroupsStageEnabled"),P("componentLayoutEnabled"),P("subgraphLayoutEnabled"))]},_$_djn:["FamilyType","FNC"],_$_ejn:["VerticalNodeAlignment","GNC"],_$_fjn:["FamilyMembersSortingPolicy","HNC"],_$$_ota:["yfiles.genealogy","yfiles._R.T","yfiles._R.C"]});var I=["Unknown alignment.","DataProvider "," is not registered to the graph.","FamilyTypeDpKey","Direct link between two individuals","Family node has more than two parent nodes","Direct link between two family nodes"];O("_$$_ota",function(n){n._$_cjn=new E(function(){return{$extends:$.C.DKC,constructor:function(){$.C.DKC.call(this),this.$f=null,this.$Mhf=!1,this.$HVf.$cy=12,this.$f12=i(this)},$f16:null,$f17:null,$f3:null,$f4:null,$f19:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f21:null,$f22:null,$f12:null,$f24:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:0,_$_tpd:{get:function(){return this.$f12},set:function($){this.$f12=null===$?i(this):$}},"$m1!":function(){if(!this.$f24||0!==this.$f20)return!1;var f=this.$Av;return $.C.IJC.isInstance(f)&&(f=f.$rL),f instanceof $.C.KOC},_$_vsg:{get:function(){return this.$f13},set:function(f){if(f<0)throw $.JG.$m2();this.$f13=f}},_$_kzf:{get:function(){return this.$f14},set:function(f){if(f<0)throw $.JG.$m2();this.$f14=f}},_$_xff:{get:function(){return this.$f10},set:function($){this.$f10=$}},_$_whg:{get:function(){return this.$f18},set:function($){this.$f18=$}},_$_spd:{get:function(){return this.$f7},set:function(f){var n=0;switch(0|f){case 1:n=1;break;case 0:n=.5;break;case-1:n=0;break;default:throw $.JG.$m18(I[0])}null!==this.$f12&&this.$f12 instanceof $.C.KOC&&(this.$f12.$scf.$ZMf=n),this.$f7=0|f}},$Plf:{set:function($){this.$f48=$}},$Hff:{set:function($){this.$f31=$}},$f20:0,$f:null,_$_urg:{get:function(){return this.$f20},set:function(f){switch(0|f){case 0:case 1:case 2:case 3:case 4:this.$f20=0|f;break;default:throw $.JG.$m2()}}},$cGg:function(f){if(null===f.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY))throw $.JG.$m28(I[1]+$.T.ENC.FAMILY_TYPE_DP_KEY+I[2]);var n=new $.C.WXA(f),r=f.$iEg($.T.ZXA.GROUP_DP_KEY),i=f.$iEg($.T.ZXA.PARENT_NODE_ID_DP_KEY),t=f.$iEg($.T.ZXA.NODE_ID_DP_KEY),a=f.$iEg($.T.ZXA.GROUP_NODE_INSETS_DP_KEY),e=new $.C.WXA(f),o=null,u=$.T.XXA.$H(),_=$.T.XXA.$H(),s=$.T.XXA.$H(),E=$.T.XXA.$H(),C=$.T.XXA.$F(),O=null;if(function(f,n){f.$f21=$.T.XXA.$H();var r=n.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY);if(null!==r)for(var i=n.$isf();i.$OJ;i.$xO()){var t=i.$aJ;1===r.$IP(t)&&f.$f21.$qU(t,t.$f7)}}(this,f),function(f,n){f.$f22=$.T.XXA.$H();var r=n.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY);if(null!==r)for(var i=n.$isf();i.$OJ;i.$xO()){var t=i.$aJ;1===r.$IP(t)&&f.$f22.$qU(t,t.$f6)}}(this,f),null!==r){o=f.$fsf();for(var T=!1,h=f.$hsf();h.$OJ;h.$xO()){var P=h.$ZJ;r.$GE(P.$f2)!==r.$GE(P.$f3)?(o.$OE(P,!0),e.$wwf(P),T=!0):o.$OE(P,!1)}T||(f.$fDg(o),o=null);for(var v=f.$isf();v.$OJ;v.$xO()){var A=v.$aJ;r.$GE(A)&&(C.$kU(t.$IP(A),A),n.$ywf(A),u.$OE(A,!0),_.$kU(A,i.$IP(A)),s.$kU(A,t.$IP(A)),E.$kU(A,a.$IP(A)))}null!==r&&f.$IJg($.T.ZXA.GROUP_DP_KEY),null!==i&&f.$IJg($.T.ZXA.PARENT_NODE_ID_DP_KEY),null!==t&&f.$IJg($.T.ZXA.NODE_ID_DP_KEY),null!==a&&f.$IJg($.T.ZXA.GROUP_NODE_INSETS_DP_KEY)}var w=new $.T.ENC.T1(this);if(l(this,f,w),null!==r){var c=new $.C.AYA(f);for(v=f.$isf();v.$OJ;v.$xO()){A=v.$aJ;if(c.$SBg(A)){var D=new $.FE;u.$OE(A,!1);for(var J=c.$QBg(A).$m3();J.$p;){var m=J.$m(),Y=i.$IP(m);if(null!==Y){for(var N=0;N<D.$oC;N++)if(Y===i.$IP(D.$rC(N))){Y=null;break}null!==Y&&D.$m(m)}}if(0===D.$oC){m=c.$QBg(A).$Arf();_.$kU(A,i.$IP(m)),s.$kU(A,t.$IP(m))}else if(_.$kU(A,i.$IP(D.$rC(0))),s.$kU(A,t.$IP(D.$rC(0))),D.$oC>1){for(var K=0;K<D.$oC;K++)for(var x=C.$IP(i.$IP(D.$rC(K))),F=0;F<D.$oC;F++){var U=C.$IP(i.$IP(D.$rC(F)));g.equals(t.$IP(U),i.$IP(x))&&D.$m2(F)}if(_.$kU(A,i.$IP(D.$rC(0))),s.$kU(A,t.$IP(D.$rC(0))),1===D.$oC);else{null===O&&(O=new $.C.FXA.$v);var L=f.$Vrf();O.$m5(L),u.$OE(L,!0),s.$kU(L,L);for(N=1;N<D.$oC;N++)for(var d=D.$rC(0),M=!1;null!==d;){for(var X=C.$IP(i.$IP(d)),y=D.$rC(N);null!==y;){var G=C.$IP(i.$IP(y));if(G===X){if(D.$rC(0)!==d)for(var R=0;R<N;R++)D.$uC(R,d);D.$uC(N,y),M=!0;break}y=G}if(M)break;for(R=0;R<N;R++)D.$uC(R,d);d=X}for(N=0;N<D.$oC;N++)_.$kU(D.$rC(N),L);_.$kU(L,i.$IP(D.$rC(0))),n.$ywf(L)}}}else u.$OE(A,!1),_.$kU(A,i.$IP(A)),s.$kU(A,t.$IP(A))}c.$hqf()}var Z=new $.T.ENC.T2(this,this.$Av),p=new $.T.ENC.T4(n,r,u,_,s,E,Z),b=new $.C.AKC;b.$rL=p;var k=new $.C.VIC(b,null);k.$TMf=this.$m1();try{new $.T.ENC.T3(this,k,w,Z).$FQ(f)}finally{!function(f,n){null!==f.$f16&&(n.$IJg($.T.ILC.SOURCE_GROUP_ID_DP_KEY),n.$fDg(f.$f16),f.$f16=null),null!==f.$f17&&(n.$IJg($.T.ILC.TARGET_GROUP_ID_DP_KEY),n.$fDg(f.$f17),f.$f17=null),null!==f.$f3&&(n.$IJg($.T.ILC.SOURCE_PORT_CONSTRAINT_DP_KEY),n.$fDg(f.$f3),f.$f3=null),null!==f.$f4&&(n.$IJg($.T.ILC.TARGET_PORT_CONSTRAINT_DP_KEY),n.$fDg(f.$f4),f.$f4=null),null!==f.$f8&&(n.$IJg($.T.ZXA.GROUP_NODE_INSETS_DP_KEY),n.$gDg(f.$f8),f.$f8=null),null!==f.$f9&&(n.$IJg($.T.AKC.LAYOUT_DP_KEY),n.$gDg(f.$f9),f.$f9=null),null!==f.$f2&&(n.$IJg($.T.ZXA.NODE_ID_DP_KEY),n.$gDg(f.$f2),f.$f2=null),null!==f.$f15&&(n.$IJg($.T.ZXA.PARENT_NODE_ID_DP_KEY),n.$gDg(f.$f15),f.$f15=null),null!==f.$f6&&(n.$IJg($.T.ZXA.GROUP_DP_KEY),n.$gDg(f.$f6),f.$f6=null),null!==f.$f&&(f.$f.$VO(),f.$f=null),f.$f19=null}(this,f),null!==r&&f.$wUg($.T.ZXA.GROUP_DP_KEY,r),null!==i&&f.$wUg($.T.ZXA.PARENT_NODE_ID_DP_KEY,i),null!==t&&f.$wUg($.T.ZXA.NODE_ID_DP_KEY,t),null!==a&&f.$wUg($.T.ZXA.GROUP_NODE_INSETS_DP_KEY,a)}if(n.$Erf(),null!==O){for(N=0;N<O.$f1;N++)f.$Wzf(O.$rC(N));O=null}if(e.$Erf(),null!==this.$f1)for(N=0;N<this.$f1.$oC;N++)f.$Wzf(this.$f11.$rC(N));if(null!==o){f.$wUg($.T.ZSC.AFFECTED_EDGES_DP_KEY,o);var S=new $.C.ETC;S.$aYf=$.T.ZSC.AFFECTED_EDGES_DP_KEY;try{S.$FQ(f)}finally{f.$IJg($.T.ZSC.AFFECTED_EDGES_DP_KEY),f.$fDg(o)}}},$f5:null,$f1:null,$f11:null,$static:{FAMILY_TYPE_DP_KEY:null,T2:new E(function(){return{$extends:$.C.BKC,$final:!0,constructor:function(f,n){$.C.BKC.call(this,n),this.$f=f,this.$f1=$.T.XXA.$G()},$f1:null,"$m!":function($){return this.$f1.$IP($)},"$FQ!":function($){if(this.$rL.$FQ($),this.$f.$m1())for(var f=$.$isf();f.$OJ;f.$xO())for(var n=f.$aJ.$lEg(null);n.$OJ;n.$xO()){var r=n.$ZJ;this.$f1.$kU(r,$.$CJg(r))}},$f:null}}),T3:new E(function(){return{$extends:$.C.BKC,$final:!0,constructor:function(f,n,r,i){$.C.BKC.call(this,n),this.$f=f,this.$f2=r,this.$f1=i},$f2:null,$f1:null,"$FQ!":function(f){if(this.$f.$m1()){var n=new $.C.AYA(f),r=$.T.XXA.$H();!function(f,n,r,i){for(var l=r.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY),a=f.$f.$f11.$Zpf();a.$OJ;a.$xO()){var e=a.$aJ,o=n.$QBg(e);if(t(0,o,l)){i.$OE(e,!0);for(var u=o.$Zpf();u.$OJ;u.$xO()){var _=u.$aJ;if(1!==l.$IP(_))for(var s=_.$lEg(null);s.$OJ;s.$xO())f.$f.$f4.$kU(s.$ZJ,null)}}}}(this,n,f,r),this.$rL.$FQ(f),function(f,n,r,i,t){for(var l=n.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY),a=f.$f.$f11.$Zpf();a.$OJ;a.$xO()){var e=a.$aJ;if(i.$GE(e)){for(var o=r.$QBg(e),u=null,_=null,s=o.$Zpf();s.$OJ;s.$xO()){var E=s.$aJ;1!==l.$IP(E)&&E.$f6>0&&(null===u?u=E:_=E)}if(null!==u&&null!==_){var C=n.$wAf(u),O=n.$wAf(_),g=t.$m(u.$f11).$f,T=t.$m(_.$f11).$f;if(C>O&&g<T||C<O&&g>T){var h=n.$bEg(e);for(s=o.$Zpf();s.$OJ;s.$xO()){E=s.$aJ;var P=h.$f+h.$f3-(n.$wAf(E)-h.$f);n.$gWg(E,P,n.$xAf(E))}}}}}}(this,f,n,r,this.$f1),function(f,n,r,i){for(var t=n.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY),l=f.$f.$f11.$Zpf();l.$OJ;l.$xO()){var a=l.$aJ;if(i.$GE(a))for(var e=r.$QBg(a).$Zpf();e.$OJ;e.$xO()){var o=e.$aJ;if(1!==t.$IP(o))for(var u=o.$lEg(null);u.$OJ;u.$xO()){var _=u.$ZJ;n.$CVg(_,new $.C.GWA.$w(0,-n.$m38(o).$xL/2)),f.$f.$f4.$kU(_,$.T.GLC.$w(1,!0))}}}}(this,f,n,r),f.$wUg($.T.ZXA.GROUP_NODE_INSETS_DP_KEY,this.$f.$f8);var i=this.$f1.$rL;i.$Ry=0,this.$f2.$f1=!0,this.$rL.$FQ(f),i.$Ry=1,this.$f2.$f1=!1,f.$IJg($.T.KOC.INCREMENTAL_HINTS_DP_KEY),n.$hqf()}else this.$rL.$FQ(f)},$f:null}}),T4:new E(function(){return{$extends:$.C.BKC,$final:!0,constructor:function(f,n,r,i,t,l,a){$.C.BKC.call(this,a),this.$f=f,this.$f1=n,this.$f2=r,this.$f5=i,this.$f4=t,this.$f3=l},"$FQ!":function(f){var n=new $.C.FXA.$w(this.$f.$Duf());this.$f.$Erf(),null!==this.$f1&&(f.$wUg($.T.ZXA.GROUP_DP_KEY,this.$f2),f.$wUg($.T.ZXA.PARENT_NODE_ID_DP_KEY,this.$f5),f.$wUg($.T.ZXA.NODE_ID_DP_KEY,this.$f4),f.$wUg($.T.ZXA.GROUP_NODE_INSETS_DP_KEY,this.$f3)),this.$Xmg(f),this.$f.$zwf(n),f.$IJg($.T.ZXA.GROUP_DP_KEY),f.$IJg($.T.ZXA.PARENT_NODE_ID_DP_KEY),f.$IJg($.T.ZXA.NODE_ID_DP_KEY),f.$IJg($.T.ZXA.GROUP_NODE_INSETS_DP_KEY)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new E(function(){return{$final:!0,constructor:function($,f){this.$f1=$,this.$f=f},$f1:null,$f:null,"equals!":function($){if(this===$)return!0;if(null===$||f.lang.getType(this)!==f.lang.getType($))return!1;var n=$;return this.$f===n.$f&&this.$f1===n.$f1},"hashCode!":function(){var $=this.$f1.hashCode();return $=31*$+this.$f.hashCode()}}}),T1:new E(function(){return{$final:!0,$with:[$.C.GJC],constructor:function(f){this.$f=f,this.$f1=!1,this.$f3=$.T.XXA.$H(),this.$f2=new $.T.ENC.T1.T(this,this.$f3,this.$f.$f21)},$f1:!1,$f2:null,$f3:null,"$FQ!":function(f){if(1!==f.$ss){if(2===f.$ss&&this.$f.$f10&&this.$f.$f22.$OP(f.$rs)<2&&this.$f.$f22.$OP(f.$kp)<2){for(var n=null,r=null,i=f.$isf();i.$OJ;i.$xO()){var t=i.$aJ;1!==f.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY).$IP(t)?n=t:r=t}if(null!==n&&null!==r){var l=f.$m38(n),a=f.$m38(r);l.$wW(-l.$bK/2,0),a.$wW(-a.$bK/2,l.$xL+this.$f.$f14);for(var e=r.$lEg(null);e.$OJ;e.$xO()){var o=e.$ZJ;($$=f.$m37(o)).$jO(),$$.$KM=new $.C.GWA.$w(0,0),$$.$LM=new $.C.GWA.$w(0,0)}var u=this.$f.$f8.$IP(n),_=new $.C.XVA(u.top,u.left,-this.$f.$f14-f.$m38(r).$xL,u.right);return void this.$f.$f8.$kU(n,_)}}var E=new $.C.FXA.$v;if(this.$f1)E.$Wwf(f.$isf()),E.$Awf(new $.T.ENC.T1.T1(this,f));else{var C=new $.C.FXA.$v,O=new $.C.FXA.$v;for(i=f.$isf();i.$OJ;i.$xO()){t=i.$aJ;1!==f.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY).$IP(t)?C.$m5(t):O.$m5(t)}for(var g=null,T=0,h=0;h<C.$f1;h++){(Q=C.$rC(h)).$yuf().$YJ>T&&(T=Q.$yuf().$YJ,g=Q)}C.$MI(g),E.$m5(g),function f(n,r,i,t,l){for(var a=new $.C.FXA.$v,e=l.$yuf();e.$OJ;e.$xO()){var o=e.$aJ;if(i.$MI(o)){var u=s(n,o,l,new $.C.FXA.$x(l));n.$f3.$qU(o,u),a.$m5(o)}}a.$Awf(n.$f2);var _=l.$f2.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY),E=!1;if(1===a.$f1&&t.indexOf(l)===t.$f1-1&&(E=!0),2===n.$f.$f20||4===n.$f.$f20)for(var C=0;C<a.$f1;C++)4===n.$f.$f20===(2===_.$IP(l))?t.$m5(a.$rC(C)):t.$QI(0,a.$rC(C));else if(0!==n.$f.$f20&&1===t.$f1&&1===a.$f1)3===n.$f.$f20===(2===_.$IP(l))?t.$m5(a.$rC(0)):t.$QI(0,a.$rC(0));else{var O=t.indexOf(l),g=t.indexOf(l)+1;for(C=0;C<a.$f1;C++)C%2!==0||E?t.$QI(g,a.$rC(C)):t.$QI(O,a.$rC(C)),g++}var T=new $.C.FXA.$v;for(C=0;C<a.$f1;C++){for(var h=!1,P=null,I=(o=a.$rC(C)).$Iuf();I.$OJ;I.$xO())if((P=I.$aJ)!==l){h=!0;break}if(r.$MI(P)){T.$m5(P);var v=t.indexOf(o);t.indexOf(l)>v?t.$QI(t.indexOf(o),P):t.$QI(t.indexOf(o)+1,P)}else if(h){var A=0;for(t.$MI(o),I=o.$Iuf();I.$OJ;I.$xO())A=Math.max(t.indexOf(I.$aJ),A);t.$QI(A,o)}}a=null;for(C=0;C<T.$f1;C++)f(n,r,i,t,T.$rC(C))}(this,C,O,E,g)}var P=new $.C.FXA.$v,I=new $.C.FXA.$v,v=new $.FE,A=0,w=0,c=Number.MAX_VALUE;for(h=0;h<E.$f1;h++){t=E.$rC(h);var D=f.$m38(t);1===f.$iEg($.T.ENC.FAMILY_TYPE_DP_KEY).$IP(t)?(P.$m5(t),v.$m(h),D.$wW(A+Math.max((this.$f.$f13-D.$bK)/2,D.$bK/4),-D.$xL/2),A=A+Math.max(1.5*D.$bK,this.$f.$f13)|0):(I.$m5(t),c=Math.min(D.$xL,c),w=Math.max(D.$xL,w),D.$wW(A,-D.$xL/2),A=A+D.$bK|0)}if(0!==this.$f.$f7)for(h=0;h<I.$f1;h++){D=f.$m38(I.$rC(h));1===this.$f.$f7?D.$wW(D.$MJ,-(D.$xL-c/2)):D.$wW(D.$MJ,-c/2)}var J=$.DF.$m10(E.$f1),m=-2;for(h=0;h<P.$f1;h++){var Y=P.$rC(h),N=!1,K=$.VE.$m8(v.$rC(h));if(this.$f.$f18||m===K-1&&0===J[m])N=!0;else for(var x=Y.$Iuf();x.$OJ;x.$xO()){var F=x.$aJ,U=E.indexOf(F)-K;if(Math.abs(U)>2){N=!0;break}}if(N)J[K]=1;else{var L=new $.C.GWA.$w(0,0);for(e=Y.$lEg(null);e.$OJ;e.$xO()){o=e.$ZJ;if(($$=f.$m37(o)).$jO(),0===this.$f.$f7)$$.$KM=L;else{D=f.$m38(o.$f2);f.$zVg(o,new $.C.GWA.$w(D.$MJ+D.$bK/2,0))}$$.$LM=L}P.$m8(h),v.$m2(h),h--}m=K}var d,M=w/2;1===this.$f.$f7?M=c/2:-1===this.$f.$f7&&(M=w-c/2),d=M;for(h=0;h<P.$f1;h++){Y=P.$rC(h);for(var X=$.VE.$m8(v.$rC(h)),y=0,G=Y.$Iuf();G.$OJ;G.$xO()){for(var R=E.indexOf(G.$aJ),Z=Math.min(X,R),p=Math.max(X,R),b=0,k=Z;k<=p;k++)b+=J[k];y=Math.max(b,y)}D=f.$m38(Y);var S=M+this.$f.$f14+(D.$xL+this.$f.$f14)*(y-1);D.$wW(D.$MJ,S),d=Math.max(d,S+D.$xL)}for(var W=0;W<I.$f1;W++){var Q=I.$rC(W),V=E.indexOf(Q),B=0,H=new $.C.JVA.$v;for(e=Q.$iGg(null);e.$OJ;e.$xO()){o=e.$ZJ;J[E.indexOf(o.$f3)]>0&&(H.$m5(o),B++)}if(B>0){var j=f.$m38(Q).$bK/(B+1),q=$.DF.$m10(H.$f1),z=$.DF.$m10(H.$f1);for(h=0;h<H.$f1;h++){q[h]=E.indexOf(H.$rC(h).$f3)-V,q[h]>0&&(q[h]-=2*E.$f1),z[h]=j;for(k=0;k<h;k++)q[h]>q[k]?z[k]+=j:z[h]+=j}for(h=0;h<H.$f1;h++){var $$;o=H.$rC(h);($$=f.$m37(o)).$jO(),$$.$LM=new $.C.GWA.$w(0,0);var f$=f.$m38(Q),n$=f.$m38(o.$f3),r$=this.$f.$f19.$AD(o)?f$.$bK/2:z[h],i$=n$.$NJ+n$.$xL/2;$$.$KM=new $.C.GWA.$w(r$-f$.$bK/2,0),$$.$MV(f$.$MJ+r$,i$)}}}var t$=(u=this.$f.$f8.$IP(I.$rC(0))).top,l$=u.bottom;null!==u&&0===this.$f.$f7?t$=d-M:null!==u&&1===this.$f.$f7&&(l$=M-d),this.$f.$f8.$kU(I.$rC(0),new $.C.XVA(t$,u.left,l$,u.right))}},$f:null,$static:{T:new E(function(){return{$final:!0,$with:[$.C.RYA],constructor:function($,f,n){this.$f1=$,this.$f=f,this.$f2=n},$f:null,$f2:null,"$RI!":function(f,n){var r=$.T.RXA.$m(this.$f.$OP(f),this.$f.$OP(n));return 0!==r?r:$.T.RXA.$m(this.$f2.$OP(f),this.$f2.$OP(n))},$f1:null}}),T1:new E(function(){return{$final:!0,$with:[$.C.RYA],constructor:function($,f){this.$f1=$,this.$f=f},$f:null,"$RI!":function(f,n){return $.T.RXA.$D(this.$f.$wAf(f),this.$f.$wAf(n))},$f1:null}})}}}),$clinit:function(){$.T.ENC.FAMILY_TYPE_DP_KEY=new $.C.HVA($.C.FNC.$class,$.C.ENC.$class,I[3])}}}})}),O("_$$_ota",function($){$._$_djn=new C(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),O("_$$_ota",function($){$._$_ejn=new C(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})}),O("_$$_ota",function($){$._$_fjn=new C(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})})}(y.lang.module("yfiles._R"),y,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);export default y;
